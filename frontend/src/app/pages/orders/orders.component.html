<h1>Zamówienia</h1>
<app-filter class="d-block pb-3 bg-white sticky-top" [(activeFilterIdx)]="activeFilterIdx" [filters]="filters">
    <h2>Filtry</h2>
</app-filter>
<div class="row">
    <div
        class="col-12 col-md-6 col-lg-4 mb-4"
        *ngFor="let order of orders$ | async | filterByFn : getCurrentFilterFn(); trackBy: trackByOrderId"
    >
        <div class="card card-body" [ngClass]="{ disabled: order.order_status === 'done' }">
            <h3 class="card-title">Zamówienie nr: {{ order.order_number }}</h3>
            <p>Status zamówienia: {{ order.order_status | orderStatus }}</p>
            <p>Produkty do przygotowania:</p>
            <ul class="list-group mb-3" *ngFor="let product of order.products">
                <li class="list-group-item" [ngClass]="{ 'text-decoration-line-through': optionDone.value }">
                    <div class="d-flex justify-content-between align-items-center">
                        <p class="m-0">
                            {{ product.short_name }}
                        </p>
                        <input
                            ngModel
                            name="optionDone"
                            #optionDone="ngModel"
                            style="width: 20px; height: 20px"
                            type="checkbox"
                        />
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item" *ngFor="let productOption of product.options">
                            <p class="m-0">{{ productOption.name }} - {{ productOption.value }}</p>
                        </li>
                    </ul>
                </li>
            </ul>
            <ng-container [ngSwitch]="order.order_status">
                <app-confirm-button
                    *ngSwitchCase="'new'"
                    (confirm)="updateOrderStatus(order.order_id, 'done')"
                    label="Oznacz jako wykonane"
                    confirmBtnClass="btn-success w-100"
                    cancelBtnClass="w-100"
                ></app-confirm-button>
                <app-confirm-button
                    *ngSwitchCase="'done'"
                    (confirm)="updateOrderStatus(order.order_id, 'new')"
                    label="Oznacz jako niewykonane"
                    confirmBtnClass="btn-danger w-100"
                    cancelBtnClass="w-100"
                ></app-confirm-button>
            </ng-container>
        </div>
    </div>
</div>
